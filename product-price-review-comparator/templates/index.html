<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Product Price & Review Comparator</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="container">
    <h1>Product Price & Review Comparator</h1>
    <form method="post">
      <input name="product" placeholder="Enter product name (e.g. iPhone 14)" value="{{ query }}" required>
      <button type="submit">Compare</button>
    </form>

    {% if result %}
      <section class="results">
        <h2>Results for "{{ result.product }}"</h2>

        <h3>Lowest Price</h3>
        <p><strong>{{ result.lowest.platform }}</strong> — ₹{{ result.lowest.price }}</p>

        <h3>Price Comparison</h3>
        <table>
          <thead><tr><th>Platform</th><th>Price</th></tr></thead>
          <tbody>
            {% for p in result.prices %}
              <tr><td>{{ p.platform }}</td><td>₹{{ p.price }}</td></tr>
            {% endfor %}
          </tbody>
        </table>

        <h3>Sentiment Summary (reviews)</h3>
        <p>Overall: <strong>{{ result.sentiment.overall }}</strong></p>
        <p>Positive: {{ result.sentiment.positive }} | Neutral: {{ result.sentiment.neutral }} | Negative: {{ result.sentiment.negative }}</p>

        <h3>Top Reviews</h3>
        <ul>
          {% for r in result.top_reviews %}
            <li><strong>{{ r.platform }}:</strong> {{ r.review }} <em>({{ r.sentiment }})</em></li>
          {% endfor %}
        </ul>
      </section>
    {% endif %}
  </div>
</body>
</html>
